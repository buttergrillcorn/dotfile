#+TITLE: Dotfiles Configuration
#+AUTHOR: James
#+PROPERTY: header-args :mkdirp yes :noweb yes

* Shared Configuration

** Colors
#+name: colors
#+begin_src conf
# Define color scheme (can be generated by pywal)
set $bg #1a1b26
set $fg #c0caf5
set $accent #7aa2f7
set $urgent #f7768e
#+end_src

** Variables
#+name: terminal
#+begin_src text
foot
#+end_src

#+name: font
#+begin_src text
monospace 11
#+end_src

* Sway
#+begin_src conf :tangle packages/sway/.config/sway/config
# Sway configuration
set $mod Mod4
set $term <<terminal>>

<<colors>>

# Output configuration
output * bg ~/wallpapers/default.png fill

# Window colors
client.focused $accent $accent $bg $accent $accent
client.unfocused $bg $bg $fg $bg $bg
client.urgent $urgent $urgent $fg $urgent $urgent

# Basic keybinds
bindsym $mod+Return exec $term
bindsym $mod+d exec fuzzel
bindsym $mod+Shift+q kill

# Reload/exit
bindsym $mod+Shift+c reload
bindsym $mod+Shift+e exec swaynag -t warning -m 'Exit sway?' -B 'Yes' 'swaymsg exit'
#+end_src

* Waybar
#+begin_src json :tangle packages/waybar/.config/waybar/config
{
  "layer": "top",
  "position": "top",
  "height": 30,
  "modules-left": ["sway/workspaces", "sway/mode"],
  "modules-center": ["clock"],
  "modules-right": ["network", "battery", "pulseaudio"],
  "clock": {
    "format": "{:%Y-%m-%d %H:%M}"
  },
  "battery": {
    "format": "{capacity}% {icon}",
    "format-icons": ["", "", "", "", ""]
  },
  "network": {
    "format-wifi": "{essid} ",
    "format-disconnected": "Disconnected"
  },
  "pulseaudio": {
    "format": "{volume}% {icon}",
    "format-icons": ["", "", ""]
  }
}
#+end_src

* Mako
#+begin_src ini :tangle packages/mako/.config/mako/config
font=<<font>>
background-color=#1a1b26
text-color=#c0caf5
border-color=#7aa2f7
border-size=2
default-timeout=5000
#+end_src

* Fuzzel
#+begin_src ini :tangle packages/fuzzel/.config/fuzzel/fuzzel.ini
[main]
font=<<font>>
#+end_src

* Foot
#+begin_src ini :tangle packages/foot/.config/foot/foot.ini
[main]
font=<<font>>

[colors]
foreground=c0caf5
background=1a1b26
#+end_src

* Yazi
#+begin_src toml :tangle packages/yazi/.config/yazi/yazi.toml
[manager]
ratio = [1, 4, 3]
#+end_src

* Qutebrowser
#+begin_src python :tangle packages/qutebrowser/.config/qutebrowser/config.py
config.load_autoconfig(False)
c.fonts.default_family = "<<font>>"
#+end_src

* Swaylock
#+begin_src conf :tangle packages/swaylock/.config/swaylock/config
color=1a1b26
#+end_src

* Swayidle
#+begin_src conf :tangle packages/swayidle/.config/swayidle/config
timeout 300 'swaylock'
timeout 600 'swaymsg "output * dpms off"'
resume 'swaymsg "output * dpms on"'
#+end_src

* Zsh
#+begin_src sh :tangle packages/zsh/.zshrc
# Zsh configuration
HISTFILE=~/.histfile
HISTSIZE=10000
SAVEHIST=10000

# Auto-start WM on TTY1
if [ -z "$WAYLAND_DISPLAY" ] && [ "$XDG_VTNR" -eq 1 ]; then
  exec ~/.local/bin/select-wm.sh sway
fi
#+end_src

* Pywal
#+begin_src conf :tangle packages/pywal/.config/wal/templates/colors-sway.conf
# Generated by pywal
set $wallpaper {wallpaper}
set $background {background}
set $foreground {foreground}
set $color0 {color0}
set $color1 {color1}
set $color2 {color2}
set $color3 {color3}
set $color4 {color4}
set $color5 {color5}
set $color6 {color6}
set $color7 {color7}
#+end_src
